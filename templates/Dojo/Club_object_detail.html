{% extends "base.html" %}
{% block subtitle %}{{ object.Name }} Detail{% endblock %}

{% block content %}
<h4><a href="{% url practice_list club=object.Slug %}">Practice List</a></h4>
<p>Click <a href = "{% url club_check club=object.Slug%}">here</a> to check club for missing or inactive members</p>
<h4>Instructors</h4>
<table width="70%">
<thead>
<th>Name</th>
<th>Rank</th>
<th>Classes Taught</th>
</thead>
{% for member in object.get_instructors.distinct %}
<tr>
<td><a href="{{ member.get_absolute_url }}">{{ member.Name }}</a></td>
<td>{{ member.rankrecord_set.latest.Rank }}</td>
<td>{{ member.PracticeNum }}</td>
</tr>
{% endfor %}
</table>

<h4>Active Students</h4>
<table width="70%">
<thead>
<th>Name</th>
<th>Rank</th>
<th>Classes Taken</th>
<th>Missing Requirements!</th>
</thead>
{% for player in object.get_students.distinct %}
    {% if player.is_active %}
    {% with player.check_missing_reqs as missing_recs %}
    <tr>
{% spaceless %}<td><a href="{{ player.get_absolute_url }}">{% if missing_recs %}<b>{{ player.Name }}</b>{% else %}{{ player.Name }}{% endif %}</a></td>{% endspaceless %}
<td>{{ player.rankrecord_set.latest.Rank }}</td>
<td>{{ player.PracticeNum }}</td>

        <td>{{ missing_recs|join:", " }}</td>
        {% endwith %}
</tr>
    {% endif %}
{% endfor %}
</table>

<h4>InActive Members</h4>
<table width="70%">
<thead>
<th>Member Name</th>
<th>Rank</th>
<th># classes</th>
<th>Length Gone</th>
</thead>
{% for player in object.get_students.distinct %}
    {% if not player.is_active %}
    <tr>
<td><a href="{{ player.get_absolute_url }}">{{ player.Name }}</a></td>
<td>{{ player.rankrecord_set.latest.Rank }}</td>
<td>{{ player.PracticeNum }}</td>
<td>{{ player.last_practice|timesince|truncatewords:2 }} ({{ player.last_practice|date:"SHORT_DATE_FORMAT" }})</td>
</tr>
    {% endif %}
{% endfor %}
</table>


{% endblock %}