{% extends "base.html" %}
{% block extrahead %}


	<style type="text/css">
	.ui-autocomplete-loading { background: white right center no-repeat; }
	</style>
	<script type="text/javascript">
	$(function() {
		function split(val) {
			return val.split(/{{ split_val }}\s*/);
		}
		function extractLast(term) {
			return split(term).pop();
		}

		$("#{{ autocomplete_field }}").autocomplete({
			source: function(request, response) {
				$.getJSON("{% url person_search %}", {
					term: extractLast(request.term)
				}, response);
			},
			search: function() {
				// custom minLength
				var term = extractLast(this.value);
				if (term.length < 2) {
					return false;
				}
			},
			focus: function() {
				// prevent value inserted on focus
				return false;
			},
			select: function(event, ui) {
				var terms = split( this.value );
				// remove the current input
				terms.pop();
				// add the selected item
				terms.push( ui.item.value );
				// add placeholder to get the comma-and-space at the end
				terms.push("");
				this.value = terms.join("{{ split_val }} ");
				return false;
			}
		});
	});
	</script>
{% endblock %}
{% block subtitle %}{{ club.Name }}: Practice Detail{% endblock %}
{% block content %}
<h4>Practice for {{ practice.Date }}</h4>
<div class="ui-widget">
<form method="post" action="">
    {{ form.as_p }}
    {%  csrf_token %}
    <input type="submit" value="Submit">
</form>
</div>

<h4>Instructors</h4>
<ul>
{% for person in practice.person_set.all%}
{% if person.is_instructor %}
<li><a href="{{ person.get_absolute_url }}">{{ person.Name }}</a></li>
{% endif %}
{% empty %}
<p>No instructors listed!</p>
{% endfor %}
</ul>

<h4>Students</h4>
<ul>
{% for person in practice.person_set.all%}
{% if not person.is_instructor %}
<li><a href="{{ person.get_absolute_url }}">{{ person.Name }}</a></li>
{% endif %}
{% empty %}
<p>No students listed!</p>
{% endfor %}
</ul>

{% endblock %}

